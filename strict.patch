
Upstream-Tracker: http://pear.php.net/bugs/bug.php?id=18774

--- Net_SmartIRC-1.0.2/usr/share/pear/Net/SmartIRC/messagehandler.php	2011-09-01 23:03:18.082560612 +0300
+++ Net_SmartIRC-1.0.2/usr/share/pear/Net/SmartIRC/messagehandler.php	2011-09-01 23:02:16.796647143 +0300
@@ -47,7 +47,7 @@
         if ($this->_channelsyncing == true) {
             if ($this->_nick == $ircdata->nick) {
                 $this->log(SMARTIRC_DEBUG_CHANNELSYNCING, 'DEBUG_CHANNELSYNCING: joining channel: '.$ircdata->channel, __FILE__, __LINE__);
-                $channel = &new Net_SmartIRC_channel();
+                $channel = new Net_SmartIRC_channel();
                 $channel->name = $ircdata->channel;
                 $microint = $this->_microint();
                 $channel->synctime_start = $microint;
@@ -65,7 +65,7 @@
             
             $this->log(SMARTIRC_DEBUG_CHANNELSYNCING, 'DEBUG_CHANNELSYNCING: '.$ircdata->nick.' joins channel: '.$ircdata->channel, __FILE__, __LINE__);
             $channel = &$this->_channels[strtolower($ircdata->channel)];
-            $user = &new Net_SmartIRC_channeluser();
+            $user = new Net_SmartIRC_channeluser();
             $user->nick = $ircdata->nick;
             $user->ident = $ircdata->ident;
             $user->host = $ircdata->host;
@@ -335,7 +335,7 @@
                 
                 $channel = &$this->_channels[strtolower($ircdata->channel)];
                 
-                $user = &new Net_SmartIRC_channeluser();
+                $user = new Net_SmartIRC_channeluser();
                 $user->ident = $ircdata->rawmessageex[4];
                 $user->host = $ircdata->rawmessageex[5];
                 $user->server = $ircdata->rawmessageex[6];
@@ -383,7 +383,7 @@
             $userarray = explode(' ', rtrim($ircdata->message));
             $userarraycount = count($userarray);
             for ($i = 0; $i < $userarraycount; $i++) {
-                $user = &new Net_SmartIRC_channeluser();
+                $user = new Net_SmartIRC_channeluser();
                 
                 $usermode = substr($userarray[$i], 0, 1);
                 switch ($usermode) {
--- Net_SmartIRC-1.0.2/usr/share/pear/Net/SmartIRC.php	2011-09-01 23:03:18.485910927 +0300
+++ Net_SmartIRC-1.0.2/usr/share/pear/Net/SmartIRC.php	2011-09-01 23:02:16.406630722 +0300
@@ -1403,7 +1403,7 @@
      */
     function listenFor($messagetype)
     {
-        $listenfor = &new Net_SmartIRC_listenfor();
+        $listenfor = new Net_SmartIRC_listenfor();
         $this->registerActionhandler($messagetype, '.*', $listenfor, 'handler');
         $this->listen();
         $result = $listenfor->result;
@@ -1438,7 +1438,7 @@
         }
         
         $id = $this->_actionhandlerid++;
-        $newactionhandler = &new Net_SmartIRC_actionhandler();
+        $newactionhandler = new Net_SmartIRC_actionhandler();
         
         $newactionhandler->id = $id;
         $newactionhandler->type = $handlertype;
@@ -1540,7 +1540,7 @@
     function registerTimehandler($interval, &$object, $methodname)
     {
         $id = $this->_timehandlerid++;
-        $newtimehandler = &new Net_SmartIRC_timehandler();
+        $newtimehandler = new Net_SmartIRC_timehandler();
         
         $newtimehandler->id = $id;
         $newtimehandler->interval = $interval;
@@ -1646,7 +1646,7 @@
         }
         
         // looks like the module satisfies us
-        $module = &new $classname;
+        $module = new $classname;
         $this->log(SMARTIRC_DEBUG_MODULES, 'DEBUG_MODULES: successful created instance of: '.$classname, __FILE__, __LINE__);
         
         $this->log(SMARTIRC_DEBUG_MODULES, 'DEBUG_MODULES: calling '.$classname.'::module_init()', __FILE__, __LINE__);
@@ -1935,7 +1935,7 @@
             $this->log(SMARTIRC_DEBUG_IRCMESSAGES, 'DEBUG_IRCMESSAGES: received: "'.$rawline.'"', __FILE__, __LINE__);
             
             // building our data packet
-            $ircdata = &new Net_SmartIRC_data();
+            $ircdata = new Net_SmartIRC_data();
             $ircdata->rawmessage = $rawline;
             $lineex = explode(' ', $rawline);
             $ircdata->rawmessageex = $lineex;
